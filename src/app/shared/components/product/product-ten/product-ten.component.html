<div class="product no-span">
    <figure class="product-media">
        <!-- <span class="product-label label-new" *ngIf="product.new">New</span>
         <span class="product-label label-sale" *ngIf="product.sale_price">Sale</span> -->
        <span class="product-label label-top" *ngIf="exist">{{pourcentage}}%</span>
       <!-- <span class="product-label label-out" *ngIf="!product.stock || product.stock == 0">Out Of Stock</span> -->

        <a [routerLink]="['/product/default/'+ product.id]">
            <molla-image [src]="product.picture" alt="Product" class="product-image">
            </molla-image>
            <!-- <molla-image [src]="SERVER_URL + product.sm_pictures[1].url" alt="Product" class="product-image-hover"
                *ngIf="product.sm_pictures[1]"></molla-image> -->
        </a>

        <div class="product-action-vertical">
            <a href="javascript:;" class="btn-product-icon btn-wishlist btn-expandable"
                [class.added-to-wishlist]="isInWishlist()" (click)="addToWishlist($event)">
                <span>{{ isInWishlist() ? 'go' : 'add' }} vers favories</span>
            </a>
        </div>

        <div class="product-action action-icon-top" >
            <a 
            class="btn-product btn-cart btn-select"
                *ngIf="false else cartBlock">
                <span>selectioner options</span>
            </a>
            <ng-template #cartBlock>
                <button class="btn-product btn-cart" (click)="addToCart($event)">
                    <span>ajouter au panier</span>
                </button>
            </ng-template>
            <button class="btn-product btn-quickview" title="update"  *ngIf="role" (click)="openUpdateProduct($event)">
                <span>modifier</span>
            </button>
            <!-- <button class="btn-product btn-quickview" title="Quick view" (click)="quickView($event)">
                <span>quick view</span>
            </button>
            <button class="btn-product btn-compare" title="Compare" (click)="addToCompare($event)">
                <span>compare</span>
            </button> -->
        </div>
    </figure>

    <div class="product-body">
        <div class="product-cat">
            <span *ngIf="exist">
                <a >{{ date }}</a>
            </span>
        </div>

        <h3 class="product-title">
            <a [routerLink]="['/product/default/'+product.id]">{{ product.name }}</a>
        </h3>

        <div class="product-price" *ngIf="!exist else elseBlock">
            <span class="out-price" style="color: #a6c76c;">{{ product.price.toFixed(2) }} DT</span>
        </div>
        <div><span>{{product.description.slice(0,15)}}</span></div>

        <ng-template #elseBlock>
            <div class="product-price" *ngIf="!exist else elseBlock">${{ minPrice.toFixed(2) }}</div>
            <ng-template #elseBlock>
                <div class="product-price" *ngIf="true else elseBlock">
                    <span class="new-price">{{product.price - product.price *pourcentage/100 }} DT</span>
                    <span class="old-price">{{product.price}} DT</span>
                </div>
                <ng-template #elseBlock>
                    <!-- <div class="product-price">${{minPrice.toFixed(2)}}&ndash;${{maxPrice.toFixed(2)}}</div> -->
                </ng-template>
            </ng-template>
        </ng-template>

        <!-- <div class="ratings-container">
            <div class="ratings">
                <div class="ratings-val" [style.width]="product.ratings * 20 + '%'"></div>
                <span class="tooltip-text">{{ product.ratings.toFixed(2) }}</span>
            </div>
            <span class="ratings-text">( {{ product.review }} Reviews )</span>
        </div> -->

        <!-- <div class="product-nav product-nav-dots" *ngIf="product.variants.length > 0">
            <div class="row no-gutters">
                <a href="javascript:;" [style.backgroundColor]="item.color" *ngFor="let item of product.variants">
                    <span class="sr-only">Color name</span></a>
            </div>
        </div> -->
    </div>
</div>